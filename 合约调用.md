## golang

### 合约参数解析

依赖: `github.com/ethereum/go-ethereum/accounts/abi`

```
func readArags(data string) {
	decodedSig, err := hex.DecodeString(data[0:8])
	if err != nil {
		log.Fatal(err)
	}
	abiBytes, _ := config.GetFileBytes("conf/erc721/MGTV.abi")
	abiObj, _ := abi.JSON(strings.NewReader(string(abiBytes)))

	for key, v := range abiObj.Methods {
		log.Println(key, hex.EncodeToString(v.ID))
	}
	// 构造函数
	if hex.EncodeToString(decodedSig) == "00000000" {
		decodedData, err := hex.DecodeString(data)
		list, err := abiObj.Constructor.Inputs.Unpack(decodedData)
		if err != nil {
			log.Fatal(err)
		}
		log.Println("method: constructor", "args:", list)
		return
	}
	method, err := abiObj.MethodById(decodedSig)
	if err != nil {
		log.Fatal(err)
	}
	log.Println(method.Name)
	decodedData, err := hex.DecodeString(data[8:])
	list, err := method.Inputs.Unpack(decodedData)
	if err != nil {
		log.Fatal(err)
	}
	log.Println("method:", method.Name, "args:", list)
}

```
